<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Master Project Timeline — PO Dashboard</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#94a3b8;--accent:#06b6d4;--success:#10b981}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;background:#f7fafc;color:#0f1724}
    .container{max-width:1200px;margin:32px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    h1{font-size:20px;margin:0}
    p.lead{margin:4px 0 0;color:var(--muted)}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    input[type=search],select{padding:8px 10px;border:1px solid #e2e8f0;border-radius:8px}
    button{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
    button.ghost{background:transparent;color:var(--accent);border:1px solid rgba(6,182,212,.12)}
    table{width:100%;border-collapse:collapse;background:white;border-radius:8px;overflow:hidden;box-shadow:0 6px 18px rgba(2,6,23,.06)}
    th,td{padding:12px 14px;text-align:left;border-bottom:1px solid #eef2f7;font-size:13px}
    thead th{background:#f1f5f9;color:#0f1724;font-weight:600}
    tbody tr:hover{background:#fbfdff}
    .status{display:inline-flex;align-items:center;gap:6px;padding:6px 8px;border-radius:999px;font-weight:600}
    .status.completed{background:rgba(16,185,129,.12);color:var(--success)}
    .status.warning{background:rgba(250,204,21,.08);color:#a16207}
    .check{font-size:16px;background:linear-gradient(90deg,#34d399,#06b6d4);-webkit-background-clip:text;background-clip:text;color:transparent}
    .notes{color:var(--muted);font-size:12px}
    .tag{background:#eef2ff;color:#0369a1;padding:4px 8px;border-radius:8px;font-size:12px}
    .right{white-space:nowrap}
    .small{font-size:12px;color:var(--muted)}
    .download{display:inline-flex;align-items:center;gap:8px}
    @media(max-width:880px){table{font-size:12px}th,td{padding:10px}}
    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,.5);z-index:40}
    .modal .card{background:white;padding:18px;border-radius:10px;max-width:760px;width:94%;box-shadow:0 10px 40px rgba(2,6,23,.3)}
    .modal .card h3{margin:0 0 8px}
    .muted{color:var(--muted)}
  </style>
</head>
<style>
  .sidebar{
    position:fixed;
    left:0;
    top:0;
    width:180px;
    height:100vh;
    background:#0b1220;
    padding:20px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .back-btn{
    display:block;
    padding:10px 14px;
    background:#06b6d4;
    color:white;
    text-decoration:none;
    border-radius:8px;
    font-size:14px;
    text-align:center;
  }
  .container{margin-left:200px !important;}
</style>
<body>
  <aside class="sidebar">
    <a href="index.html" class="back-btn">⬅ Back to Index</a>
  </aside>
  <div class="container">
    <header>
      <div>
        <h1>Master Project Timeline — PO Dashboard</h1>
        <p class="lead">Integrated development + PO team feedback timeline. All tasks marked complete with checkmarks.</p>
      </div>
      <div class="controls">
        <input id="search" type="search" placeholder="Search task, note, date..." />
        <select id="filter">
          <option value="all">All</option>
          <option value="completed">Completed</option>
          <option value="blocker">Blockers/Delays</option>
        </select>
        <button id="showBlockers" class="ghost">Toggle Blocker Rows</button>
        <button id="export">Export CSV</button>
      </div>
    </header>

    <main>
      <table id="timeline">
        <thead>
          <tr>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Task / Description</th>
            <th>Status</th>
            <th>Result / Notes</th>
            <th class="right">✔</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows generated by script -->
        </tbody>
      </table>
      <div style="margin-top:12px;font-size:13px;color:#334155">Note: Every additional revision (new column/input) creates a feedback loop: Suggest → Review → Revise → Wait → Review again → Revise again. This cycle significantly delays the project. Micro-adjustments (e.g., 1% alignment issues) are not critical — the dashboard already achieves 90–99% of its purpose.</div>
    </main>
  </div>

  <div id="modal" class="modal" role="dialog" aria-hidden="true">
    <div class="card">
      <h3 id="modalTitle">Notes</h3>
      <div id="modalBody" class="muted"></div>
      <div style="text-align:right;margin-top:12px"><button id="closeModal">Close</button></div>
    </div>
  </div>

  <script>
    // Data: integrated, deduplicated timeline rows (all tasks marked completed)
    const rows = [
      {start:'2025-09-23',end:'2025-10-02',task:'PO Dashboard Development',status:'Completed',notes:'Initial PO dashboard built',blocker:false},
      {start:'2025-10-02',end:'2025-10-02',task:'PO Dashboard v0.1 Deployment',status:'Completed',notes:'Version 0.1 deployed',blocker:false},
      {start:'2025-09-23',end:'2025-10-03',task:'Alert System Development',status:'Completed',notes:'Alert system completed',blocker:false},
      {start:'2025-09-23',end:'2025-10-03',task:'Creating PO Functionality',status:'Completed',notes:'PO creation module completed',blocker:false},
      {start:'2025-09-23',end:'2025-10-03',task:'Customer Account Dashboard Development',status:'Completed',notes:'Customer accounts dashboard completed',blocker:false},
      {start:'2025-10-03',end:'2025-11-10',task:'User Management Start Development',status:'Completed',notes:'Module initiated',blocker:false},
      {start:'2025-10-07',end:'2025-10-10',task:'Revised PO dashboard (customer code, currency display, rates, PO import)',status:'Completed',notes:'Implemented fully',blocker:false},
      {start:'2025-10-13',end:'2025-10-27',task:'PO Dashboard Revision: junction tables + billing views',status:'Completed',notes:'Database architecture improved',blocker:false},
      {start:'2025-10-16',end:'2025-11-05',task:'Fix PO creation from account + CSV parsing + notifications',status:'Completed',notes:'Functional issues resolved',blocker:false},
      {start:'2025-10-20',end:'2025-10-27',task:'PO Development: Add Filters + Bulk Import + Extended PO Inputs',status:'Completed',notes:'Filters, bulk import, new fields done',blocker:false},
      {start:'2025-10-25',end:'2025-10-25',task:'Final PO Revision',status:'Completed',notes:'PO module finalized',blocker:false},
      {start:'2025-10-26',end:'2025-10-26',task:'Migrate Dashboard from Test to WHM',status:'Completed',notes:'Successfully migrated',blocker:false},
      {start:'2025-10-30',end:'2025-10-30',task:'Setup GitHub for Dashboard Updates',status:'Completed',notes:'Git workflow connected',blocker:false},
      {start:'2025-10-29',end:'2025-11-01',task:'Migration from WHM to CPanel (Jayant)',status:'Completed',notes:'Dashboard fully migrated',blocker:false},
      {start:'2025-10-30',end:'2025-11-10',task:'User Management Development (resumed after PO)',status:'Completed',notes:'User management completed',blocker:false},
      {start:'2025-10-11',end:'2025-10-11',task:'User Management Accomplishment (initial milestone)',status:'Completed',notes:'Early user module completed',blocker:false},
      {start:'2025-10-11',end:'2025-11-13',task:'Continuation of Rate Card Development',status:'Completed',notes:'Rate card fully completed',blocker:false},
      {start:'2025-11-12',end:'2025-11-12',task:'Rate Card Feature Deployment',status:'Completed',notes:'Rate card live',blocker:false},
      {start:'2025-11-15',end:'2025-11-15',task:'Modify exchange rate currency + PO value cards update',status:'Completed',notes:'New USD/remaining/net balance cards live',blocker:false},

      // PO team feedback & blockers
      {start:'2025-10-23',end:'2025-10-27',task:'PO Team Feedback — remove currency selection when creating account; add "Other" billing cycle',status:'Completed',notes:'Caused architecture rework and initial stall; implemented 10/27',blocker:true},
      {start:'2025-10-11',end:'2025-10-27',task:'PO Revision — duplicate customers, multi-currency sums, add PO upload date, monthly exchange rate upload, Total Amount in USD, Total Remaining Balance, filtered export, Total Amount Invoiced, PO attachment, Excis Entity',status:'Completed',notes:'Significant structural changes; required new tables and import layers',blocker:true},
      {start:'2025-10-28',end:'2025-11-04',task:'PO Feedback — pagination/search issues, add invoice USD, per-row PO attachment',status:'Completed',notes:'Pagination and search fixes; added per-row attachments',blocker:true},
      {start:'2025-10-29',end:'2025-11-04',task:'PO Enhancements — add Total Amount in USD column, Total Remaining Balance, filtered export examples, attachment, Excis Entity',status:'Completed',notes:'Overlap with prior revisions; implemented',blocker:true},
      {start:'2025-11-07',end:'2025-11-07',task:'Fix exchange rate file import; make converted amount persistent',status:'Completed',notes:'Exchange rate import and persistence fixed',blocker:true},
      {start:'2025-11-11',end:'2025-11-11',task:'Fix remaining total higher than total value; correct Total Amount Invoiced calculation',status:'Completed',notes:'Implemented calculation fixes (Total Invoiced = Total Value - Total Remaining)',blocker:true},
      {start:'2025-11-04',end:'2025-11-04',task:'Completion of all 10/23–10/28 revisions',status:'Completed',notes:'All multi-phase revisions completed; caused major project stall',blocker:true},
      {start:'2025-11-10',end:'2025-11-10',task:'User Management Completed — CRUD & access control',status:'Completed',notes:'User-management page and access implemented',blocker:false},
      {start:'2025-11-11',end:'2025-11-11',task:'Notice to PO Team explaining why extensive modifications are problematic',status:'Completed',notes:'Explained feedback loop and impact on timeline',blocker:false},
      {start:'2025-11-12',end:'2025-11-13',task:'Rate Card: deployment & finalization',status:'Completed',notes:'Rate card deployment and final continuation',blocker:false}
    ];

    const tbody = document.querySelector('#timeline tbody');

    function render(rowsToShow){
      tbody.innerHTML = '';
      rowsToShow.forEach(r=>{
        const tr = document.createElement('tr');
        if(r.blocker) tr.style.background = 'linear-gradient(90deg,rgba(254,243,199,.6),transparent)';
        tr.innerHTML = `
          <td>${r.start}</td>
          <td>${r.end}</td>
          <td><strong>${escapeHtml(r.task)}</strong><div class="notes">${escapeHtml(r.notes)}</div></td>
          <td><span class="status ${r.blocker? 'warning': 'completed'}">${r.blocker? 'Blocker / Revision': '✔ Completed'}</span></td>
          <td class="small">${r.notes}</td>
          <td class="right"><span class="check">✓</span></td>
        `;
        tbody.appendChild(tr);
      })
    }

    function escapeHtml(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}

    render(rows);

    // Search / filter
    document.getElementById('search').addEventListener('input',e=>{
      const q = e.target.value.toLowerCase().trim();
      const filtered = rows.filter(r=>{
        return r.task.toLowerCase().includes(q) || r.notes.toLowerCase().includes(q) || r.start.includes(q) || r.end.includes(q);
      });
      render(filtered);
    });

    document.getElementById('filter').addEventListener('change',e=>{
      const v = e.target.value;
      if(v==='all') render(rows);
      else if(v==='completed') render(rows.filter(r=>!r.blocker));
      else if(v==='blocker') render(rows.filter(r=>r.blocker));
    });

    let blockersHidden = false;
    document.getElementById('showBlockers').addEventListener('click',()=>{
      blockersHidden = !blockersHidden;
      if(blockersHidden) render(rows.filter(r=>!r.blocker)); else render(rows);
    });

    // Modal for notes (click row)
    tbody.addEventListener('click',e=>{
      const tr = e.target.closest('tr');
      if(!tr) return;
      const idx = Array.from(tbody.children).indexOf(tr);
      const row = Array.from(tbody.children).map(t=>t).length? Array.from(tbody.children).map((t,i)=>rows[i])[idx] : null;
      // simpler: get task text
      const task = tr.querySelector('td:nth-child(3) strong').textContent;
      const note = tr.querySelector('td:nth-child(3) .notes').textContent;
      document.getElementById('modalTitle').textContent = task;
      document.getElementById('modalBody').textContent = note;
      document.getElementById('modal').style.display = 'flex';
    });
    document.getElementById('closeModal').addEventListener('click',()=>{document.getElementById('modal').style.display='none'});

    // Export CSV
    document.getElementById('export').addEventListener('click',()=>{
      const csv = toCSV(rows);
      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'master_project_timeline.csv';
      a.click();
      URL.revokeObjectURL(url);
    });

    function toCSV(data){
      const header = ['Start Date','End Date','Task / Description','Status','Result / Notes','Completed'];
      const lines = [header.join(',')];
      for(const r of data){
        const line = [r.start,r.end,`"${r.task.replace(/"/g,'""')}"`,r.blocker? 'Blocker / Revision':'Completed',`"${r.notes.replace(/"/g,'""')}"`,'✓'];
        lines.push(line.join(','));
      }
      return lines.join('\n');
    }
  </script>
</body>
</html>